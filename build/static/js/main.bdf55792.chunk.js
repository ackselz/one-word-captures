(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{32:function(e,t,a){e.exports=a(60)},59:function(e,t,a){},60:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(16),s=a.n(c),o=a(3),l=a(4),u=a(2),i=a.n(u),m=a(9),p=a(10),d=a.n(p),f="https://one-word-captures-backend.herokuapp.com/";d.a.defaults.withCredentials=!0;var b=function(e){return d.a.get("".concat(f,"/posts/search?searchQuery=").concat(e||"none"))},v=function(e){return d.a.patch("".concat(f,"/posts/").concat(e,"/likePost"))},E=function(e,t){return d.a.patch("".concat(f,"/posts/").concat(e),t)},h=function(e){return d.a.delete("".concat(f,"/posts/").concat(e))},g=function(e){return d.a.post("".concat(f,"/signUp"),e)},O=function(e){return d.a.post("".concat(f,"/signIn"),e)},y=function(e){return function(){var t=Object(m.a)(i.a.mark((function t(a){var n,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,v(e);case 3:n=t.sent,r=n.data,a({type:"LIKE",payload:r}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0.message);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},j=a(12),N=a(7),w=a(29),k=a.n(w);var S=function(e){var t=e.currentId,a=e.setCurrentId,c=Object(l.c)((function(e){return t?e.posts.find((function(e){return e._id===t})):null})),s=Object(l.c)((function(e){return e.user})),u=Object(n.useState)({title:"",tags:"",selectedFile:""}),p=Object(o.a)(u,2),b=p[0],v=p[1];Object(n.useEffect)((function(){c&&v(c)}),[c]);var h=Object(l.b)(),g=function(){a(null),v({title:"",tags:"",selectedFile:""})};return r.a.createElement("form",{className:"form",onSubmit:function(e){e.preventDefault(),h(t?function(e,t){return function(){var a=Object(m.a)(i.a.mark((function a(n){var r,c;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,E(e,t);case 3:r=a.sent,c=r.data,n({type:"UPDATE",payload:c}),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.log(a.t0.message);case 11:case"end":return a.stop()}}),a,null,[[0,8]])})));return function(e){return a.apply(this,arguments)}}()}(t,Object(N.a)(Object(N.a)({},b),{},{creator:s.username})):function(e){return function(){var t=Object(m.a)(i.a.mark((function t(a){var n,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c=e,d.a.post("".concat(f,"/posts"),c);case 3:n=t.sent,r=n.data,a({type:"CREATE",payload:r}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0.message);case 11:case"end":return t.stop()}var c}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}(Object(N.a)(Object(N.a)({},b),{},{creator:s.username}))),g()}},r.a.createElement("p",{className:"form-header"},t?"Edit":"Create"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"form-label",htmlFor:"title"},"One-Word-Title"),r.a.createElement("input",{className:"form-input",type:"text",name:"title",placeholder:"title",required:!0,pattern:"/^\\S*$/",value:b.title,onChange:function(e){return v(Object(N.a)(Object(N.a)({},b),{},{title:e.target.value}))}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"form-label",htmlFor:"tags"},"Tags (CSV format)"),r.a.createElement("input",{className:"form-input",type:"text",name:"tags",placeholder:"tags",value:b.tags,onChange:function(e){return v(Object(N.a)(Object(N.a)({},b),{},{tags:Object(j.a)(e.target.value.split(","))}))}})),r.a.createElement("div",{className:"form-fileBase"},r.a.createElement(k.a,{type:"file",multiple:!1,onDone:function(e){var t=e.base64;return v(Object(N.a)(Object(N.a)({},b),{},{selectedFile:t}))}})),r.a.createElement("button",{className:"",type:"submit"},"Submit"),r.a.createElement("button",{className:"",type:"button",onClick:g},"Clear"))},x=a(30),C=a.n(x);var _=function(e){var t=e.post,a=e.setCurrentId,c=e.user,s=Object(l.b)(),u=Object(n.useState)(null===t||void 0===t?void 0:t.likes),p=Object(o.a)(u,2),d=p[0],f=p[1],b=function(){var e=Object(m.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s(y(t._id)),t.likes.includes(null===c||void 0===c?void 0:c.username)?f(t.likes.filter((function(e){return e!==(null===c||void 0===c?void 0:c.username)}))):f([].concat(Object(j.a)(t.likes),[null===c||void 0===c?void 0:c.username]));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"card"},c&&r.a.createElement("button",{className:"card-btn card-btn-edit",onClick:function(){return a(t._id)}},r.a.createElement("img",{src:"/assets\\more_vert_black_24dp.svg",alt:""})),c&&r.a.createElement("button",{className:"card-btn card-btn-delete",onClick:function(){return s((e=t._id,function(){var t=Object(m.a)(i.a.mark((function t(a){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h(e);case 3:a({type:"DELETE",payload:e}),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log(t.t0.message);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()));var e}},r.a.createElement("img",{src:"/assets\\delete_forever_black_24dp.svg",alt:""})),r.a.createElement("div",{className:"card-img-container"},r.a.createElement("img",{className:"card-img",src:t.selectedFile,alt:""})),r.a.createElement("div",{className:"card-body"},r.a.createElement("p",{className:"card-createdAt"},C()(t.createdAt).fromNow()),r.a.createElement("p",{className:"card-tags"},t.tags.map((function(e,t){return r.a.createElement("span",{key:t},"#",e," ")}))),r.a.createElement("p",{className:"card-text"},t.message)),r.a.createElement("div",{className:"card-footer"},r.a.createElement("div",{className:"card-likes"},c&&r.a.createElement("button",{className:"card-btn card-btn-like",onClick:b},d.includes(c.username)?r.a.createElement("img",{src:"/assets\\favorite_border_black_24dp_filled.svg",alt:""}):r.a.createElement("img",{src:"/assets\\favorite_border_black_24dp.svg",alt:""})),r.a.createElement("p",{className:"card-likeCount"},d.length," ",1===d.length?"like":"likes")),r.a.createElement("p",{className:"card-creator"},"by ",t.creator)))};var I=function(e){var t=e.setCurrentId,a=Object(l.c)((function(e){return e.posts})),n=Object(l.c)((function(e){return e.user}));return a.length?r.a.createElement(r.a.Fragment,null,a.map((function(e){return r.a.createElement(_,{key:e._id,post:e,user:n,setCurrentId:t})}))):null};var R=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.user})),a=Object(n.useState)(JSON.parse(localStorage.getItem("user"))),c=Object(o.a)(a,2),s=c[0],u=c[1],p=Object(n.useState)(null),b=Object(o.a)(p,2),v=b[0],E=b[1];return Object(n.useEffect)((function(){e(function(){var e=Object(m.a)(i.a.mark((function e(t){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.get("".concat(f,"/posts"));case 3:a=e.sent,n=a.data,t({type:"FETCH_ALL",payload:n}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}())}),[v,e]),Object(n.useEffect)((function(){u(JSON.parse(localStorage.getItem("user")))}),[t]),r.a.createElement("div",{className:"home"},s?r.a.createElement(S,{currentId:v,setCurrentId:E}):null,r.a.createElement(I,{setCurrentId:E}))},F=a(1),T=a(14);var P=function(){var e=Object(l.c)((function(e){return e.user})),t=Object(n.useState)(JSON.parse(localStorage.getItem("user"))),a=Object(o.a)(t,2),c=a[0],s=a[1],u=Object(n.useState)(""),p=Object(o.a)(u,2),v=p[0],E=p[1],h=Object(l.b)(),g=Object(F.f)(),O=Object(F.e)();return Object(n.useEffect)((function(){s(JSON.parse(localStorage.getItem("user")))}),[e,O]),r.a.createElement("div",{className:"nav"},r.a.createElement(T.b,{to:"/posts"},r.a.createElement("h1",{className:"nav-brand"},"one-word-captures")),r.a.createElement("div",{className:"nav-searchbar"},r.a.createElement("input",{type:"text",name:"search",placeholder:"filter by tags",value:v,onChange:function(e){E(e.target.value)}}),r.a.createElement("button",{onClick:function(e){var t;v.trim()?(h((t=v.replace(" ",","),function(){var e=Object(m.a)(i.a.mark((function e(a){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b(t);case 3:n=e.sent,r=n.data,console.log(r),a({type:"FETCH_BY_SEARCH",payload:r}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}())),g("/posts/search?searchQuery=".concat(v||"none"))):g("/")}},"search")),c&&r.a.createElement("p",{className:"nav-user"},"Signed in as: ",c.username),c?r.a.createElement("div",{className:"auth-btn"},r.a.createElement("button",{onClick:function(){e=null,h(function(){var e=Object(m.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.post("".concat(f,"/signOut"));case 3:return e.abrupt("return",t({type:"SIGN_OUT"}));case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}())}},"SIGN OUT")):r.a.createElement("div",{className:"auth-btn"},r.a.createElement("button",{onClick:function(){g("/auth")}},"SIGN IN")))},U=a(17);var A=function(){var e=Object(l.b)(),t=Object(F.f)(),a=Object(n.useState)(!1),c=Object(o.a)(a,2),s=c[0],u=c[1],p=Object(n.useState)({username:"",password:"",confirmPassword:""}),d=Object(o.a)(p,2),f=d[0],b=d[1],v=function(e){b(Object(N.a)(Object(N.a)({},f),{},Object(U.a)({},e.target.name,e.target.value)))};return r.a.createElement("div",{className:"auth"},r.a.createElement("p",{className:"auth-header"},s?"Sign Up":"Sign In"),r.a.createElement("form",{className:"auth-form",action:"",onSubmit:function(a){return a.preventDefault(),s&&""===f.username.trim()?alert("Username cannot be blank"):s&&f.confirmPassword!==f.password?alert("Passwords do not match"):void(s?e(function(e){return function(){var t=Object(m.a)(i.a.mark((function t(a){var n,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g(e);case 3:return n=t.sent,r=n.data,console.log(r),t.abrupt("return",a({type:"SIGN_UP",payload:r}));case 9:return t.prev=9,t.t0=t.catch(0),t.abrupt("return",a({type:"ERROR",payload:{message:"Username already exists",redirect:"/auth"}}));case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}({username:f.username,password:f.password})).then((function(e){"ERROR"===(null===e||void 0===e?void 0:e.type)?alert(e.payload.message):t("/posts")})):e(function(e){return function(){var t=Object(m.a)(i.a.mark((function t(a){var n,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,O(e);case 3:return n=t.sent,r=n.data,console.log(r),t.abrupt("return",a({type:"SIGN_IN",payload:r}));case 9:return t.prev=9,t.t0=t.catch(0),t.abrupt("return",a({type:"ERROR",payload:{message:"Username or password is incorrect",redirect:"/auth"}}));case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}({username:f.username,password:f.password})).then((function(e){"ERROR"===(null===e||void 0===e?void 0:e.type)?alert(e.payload.message):t("/posts")})))}},r.a.createElement("div",{className:"auth-form-group"},r.a.createElement("label",{htmlFor:"username"},"Username:"),r.a.createElement("input",{type:"text",name:"username",required:!0,onChange:v,value:f.username})),r.a.createElement("div",{className:"auth-form-group"},s?r.a.createElement("label",{htmlFor:"password"},"*Password:"):r.a.createElement("label",{htmlFor:"password"},"Password:"),r.a.createElement("input",{type:"password",name:"password",required:!0,pattern:s?"^(?=.*?[A-Za-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$":null,value:f.password,onChange:v})),s?r.a.createElement("p",{className:"auth-form-pw"},"*Minimum eight characters, at least one letter, one number and one special character"):null,s&&r.a.createElement("div",{className:"auth-form-group"},r.a.createElement("label",{htmlFor:"confirmPassword"},"Confirm Password:"),r.a.createElement("input",{type:"password",name:"confirmPassword",pattern:"^(?=.*?[A-Za-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$",required:!0,value:f.confirmPassword,onChange:v})),r.a.createElement("button",{className:"auth-form-submit",type:"submit"},s?"Sign Up":"Sign In")),r.a.createElement("button",{className:"auth-changeMode",type:"button",onClick:function(){u((function(e){return!e}))}},s?"Already have an account? Sign in here":"Don't have an account? Sign up here"))};var D=function(){return r.a.createElement(T.a,null,r.a.createElement(P,null),r.a.createElement(F.c,null,r.a.createElement(F.a,{path:"/posts",exact:!0,element:r.a.createElement(R,null)}),r.a.createElement(F.a,{path:"/posts/search",exact:!0,element:r.a.createElement(R,null)}),r.a.createElement(F.a,{path:"/auth",exact:!0,element:r.a.createElement(A,null)})))},G=a(13),J=a(31),L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SIGN_UP":return localStorage.setItem("user",JSON.stringify(t.payload)),t.payload;case"SIGN_IN":return console.log("test"),localStorage.setItem("user",JSON.stringify(t.payload)),t.payload;case"SIGN_OUT":return console.log("test"),localStorage.removeItem("user"),null;default:return e}},H=Object(G.b)({posts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_ALL":return t.payload;case"FETCH_BY_SEARCH":return console.log(t.payload),t.payload;case"CREATE":return[].concat(Object(j.a)(e),[t.payload]);case"UPDATE":case"LIKE":return e.map((function(e){return e._id===t.payload._id?t.payload:e}));case"DELETE":return e.filter((function(e){return e._id!==t.payload}));default:return e}},user:L,error:L}),$=(a(59),Object(G.d)(H,Object(G.c)(Object(G.a)(J.a))));s.a.render(r.a.createElement(l.a,{store:$},r.a.createElement(D,null)),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.bdf55792.chunk.js.map